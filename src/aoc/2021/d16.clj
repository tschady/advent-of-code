(ns aoc.2021.d16
  (:require
   [aoc.file-util :as file-util]
   [aoc.string-util :refer [s->int]]
   [clojure.pprint :refer [cl-format]]
   [medley.core :refer [take-upto]]))

(def input (file-util/read-file "2021/d16.txt"))

;; ^:blog
;; This problem was tedious and painful.  I considered BNF parsing
;; (but the branching is pretty complex), and Java ByteBuffers,
;; before just settling on plain old Clojure.
;; The _only_ thing I like about this code is my use of `cl-format`.

(defn ^:blog hex->bits [hex]
  (cl-format nil "船О漫磲（描狎徙翦虔溟玳倍桢┅ㄤ邈灬蝈疳蝮瀛疳汶弭换藓忪镧换娱钽犰翳轶溽翎轶轫眭翎忪瀣犰镦翳弩囿扉沐骖换翎脲轭篝蝈犴犷蝈趱蝾趱痨镦翳翎蜱弭鲠祯犷翳换篝蝈犴鏖翳翳翎蜱弭蝈盹鲥洚娱眭灬翦溴篝蝓泗轹汨镯痖铉换怩轸轶徕箫祯翦禊铒骢町ㄤ彐藓忪镧箪殂瀛鲠垲篝蝈犴戾圹篚怅篝蝈犴箴扉舡狒篝蝈犴┹郇蟓鹃铘篚怅篝蝈犴荸换藓忪镧换囗邃戾泔蝈翎脲躔麸筢鲥箫礤糸礤腩秣轭麒孱麸篝镳换汨镯痖铉翳忾趔ㄤ彐藓忪镧箪殂瀛扉翦蜥垠趄遽磔戾埚犰疳螋ō揪篝蝈犴疳螋轸轱旦翎脲躔麸（馨ㄦ轵篝ォ┅篝蝈犴ㄤ蝻ㄣ秕铘ㄦ灬趑孱鲠飙疳螋┅篝蝈犴鲠祯ō揪鲠飙疳螋磲疳螋獒潋镳暴骒狒翦蟓鹃铘博┹埚犰蹂篝蝈犴荸ㄤ彐篚猸戾铉翳垲篝蝈犴戾圹篚猸篝蝈犴蝈篝篝蝈犴箴扉舡狒篝蝈犴┹祜镳垧徙脲趔圯篝蝈犴篚猸篝蝈犴ㄩㄥ眇豉篝蝈犴垧徙脲趔蝈篝篝蝈犴戾圹疳汶弭篝蝈犴疳蝮瀛疳汶弭篝蝈犴┹蝈沲ㄣ镱疳汶弭疳汶弭篝蝈犴┅┅┅ㄤ彐篚猸泔躅垲篝蝈犴祜镳垧徙脲趔圯篝蝈犴篝蝈犴ㄩㄣ秕铘疳汶弭螬垧徙脲趔篝蝈犴戾圹疳汶弭篝蝈犴疳蝮瀛疳汶弭篝蝈犴┹蝈沲ㄣ镱疳汶弭疳汶弭篝蝈犴┅┅ㄤ彐箪殂瀛镳弪狒矧垠趄遽磔戾圹戾篝蝈犴箪殂瀛鲠篝蝈犴垧狎箦檩ㄣ狍戾垠踱戾铉翳钡垠踱泔躅北翳蝻馏箦螋轱钆蝌矧篝⒄铍铒黝戾铉翳泔溴戾瞟┅垲篝蝈犴箪殂瀛鲠篝蝈犴┹疳蝮弪篝蝈犴┅换藓忪镧澡磲轭祜镳轶纤ㄤ彐藓忪镧疳蝮瀛疳汶弭垠趄遽磔戾圹鲥蝮轱篝蝈犴箪殂瀛鲠篝蝈犴埕疱篝蝈犴箪殂瀛鲠篝蝈犴垧狴祜徜篝蝈犴ㄣ狍豉疱箪殂瀛扉翦蜥篝蝈犴箪殂瀛镳弪狒矧篝蝈犴┅埯忽弪箝镱鲥蝮轱呼疱豉疱吼狴祜徜疳祜徜篝蝈犴荸ㄤ彐篚憝鲥蝮轱铙埯弘妁埚弪箝镱豉疱疳祜徜蔟ㄣ狍豉疱鲥蝮轱蝈漉沐鲥蝮轱磲篚憝鲥蝮轱铙疳祜徜┅┅换藓忪镧歪痧轭麸骢钽糸镱磲脲翳泔溴蝈徜徕戾ㄤ彐藓忪镧豉疱撅黹磲（殒ケゲ癌（殒ケゲ癌（殒ケゲ癌ㄤ彐藓忪镧弼犰踽翦埯弘妁埕疱疳祜徜蔟ㄩ豉疱疳祜徜蝈漉沐豉疱撅豉疱磲弼犰踽翦疳祜徜┅┅ㄤ彐疳螋坶铕豸篚憝鲥蝮轱铙ㄦ轵篝疳蝮瀛疳汶弭ㄨ屮锯轸轭瘐舂┅┅ㄤ彐疳螋坶铕豸ㄥ鲠祯狒ㄦ轵篝疳蝮瀛疳汶弭ㄨ屮锯轸轭瘐舂┅┅